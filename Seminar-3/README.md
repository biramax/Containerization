# Домашнее задание по семинару "Урок 3. Введение в Docker"

## 1. Установить Докер

Обновляем пакеты.

![](1.gif)

Устанавливаем пакеты, которые позволят использовать репозиторий по HTTPS.

![](2.gif)

Добавляем официальный GPG-ключ Docker.

![](3.gif)

Добавляем репозиторий Docker к списку источников пакетов.

![](4.gif)

Обновляем список пакетов, чтобы включить информацию о пакетах Docker из добавленного репозитория.

![](5.gif)

Устанавливаем Docker.

![](6.gif)

Добавляем своего пользователя в группу docker, чтобы избежать использования sudo для запуска Docker команд.
Применяем изменения (либо можно было перезагрузить систему).
Проверяем работу Докера.

![](7.gif)

В итоге всё таки потребовалось перезагрузить систему, т.к. дальшейшие задания не хотели выполняться )


## 2. Протестировать установку Докера

Запускаем контейнер с использованием образа "cowsay".

![](8.gif)

Пробуем запустить контейнер с рисунком слона )

![](9.gif)


## 3. Протестировать разные команды Докера

Смотрим, какие образы у нас установлены.

![](10.gif)

Смотрим список активных контейнеров (отсутствуют) и вообще всех имеющихся в системе (видим два контейнера, запущенных ранее).

![](11.gif)

Удаляем один контейнер по его id. Проверяем список контейнеров после этого. И удаляем все оставшиеся контейнеры. Убеждаемся, что список контейнеров после этого пуст.

![](12.gif)

После этого можно удалить и сам образ. 

![](13.gif)


## 4. Протестировать хранение данных в контейнерах Docker

Запускаем контейнер из образа Ubuntu и входим в него.

![](14.gif)

На скрине видно, что у нас нет установленного образа убунты, поэтому автоматически происходит скачивание последнего образа (т.к. мы не указали конкретную версию).  

Видим также, что мы вошли в терминал контейнера.

Выходим из контейнера и запускаем ту же команду, но с указанием имени хоста и имени контейнера, чтобы конейнер сразу получил их.

![](15.gif)

Поскольку мы вышли из контейнера, то мы его остановили. Запускаем его заново, используя его имя или id.

![](16.gif)

Посмотрим содержимое корневой директории.

![](17.gif)

Создадим новую директорию в корне.

![](18.gif)

Создадим файл "passwords.txt", добавим в него какие-либо данные и сделаем вывод файла. В контейнере не установлен текстовый редактор, но мы справимся без него.

![](19.gif)

Проверим, сохранятся ли наши данные, если мы остановим контейнер и затем запустим его снова. Данные сохранились.

![](20.gif)

Теперь удалим контейнер и создадим его заново, используя те же команды. Увидим, что данные утеряны.

![](21.gif)

### Поработаем с внешним хранилищем

Создадим директорию `/test/folder` на хосте и подмонтируем ее к папке контейнера `/otherway`. Теперь всё, что сохраняется в папку контейнера `/otherway`, будет появляться также и в хостовой (за пределами контейнера, у родителя) папке `/test/folder`.
И если удалить контейнер, то данные в этой папке останутся.

![](22.gif)

Это работает и в обратную сторону, даже если подключить контейнер к уже наполненной хостовой папке.

![](23.gif)

## Практическая ситуация хранения данных в Докере

Проработаем следующую ситуацию:

1. Создадим на хосте папку и в неё поместим файл `test.txt` c определённым содержимым.

![](24.gif)

2. Затем в домашней папке хоста создадим файл с таким же названием `test.txt`, но с другим содержимым.

![](25.gif)

3. Затем создадим контейнер, в папку которого примонтируем хостовую папку и одновременно рутовый `test.txt`.

![](26.gif)

4. При просмотре содержимого файла `test.txt` в контейнере мы видим, что там будет содержимое рутового файла `test.txt`, а не файла `test.txt` из примонтированной папки.

![](27.gif)

Так что нужно иметь ввиду эту особенность, когда мы монтируем что-то сверху того, что уже примонтировано )